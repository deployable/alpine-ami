{
  "builders": [{
    "type"         : "amazon-ebssurrogate",
    "access_key"   : "{{user `aws_access_key`}}",
    "secret_key"   : "{{user `aws_secret_key`}}",
    "region"       : "ap-southeast-2",
    "source_ami"   : "ami-881317eb",
    "instance_type": "t2.nano",
    "subnet_id"    : "subnet-85f0fcc3",
    "security_group_id": "sg-2b52e14f",
    "ssh_username" : "admin",
    "ami_name"     : "packer-debian-alpine {{timestamp}}",
    "ssh_timeout"  : "2m",
    "ami_virtualization_type": "hvm",
    "launch_block_device_mappings" : [
      {
        "volume_type" : "gp2",
        "device_name" : "/dev/xvdf",
        "delete_on_termination" : false,
        "volume_size" : 1
      }
    ],
    "ami_root_device": {
      "source_device_name": "/dev/xvdf",
      "device_name": "/dev/xvda",
      "delete_on_termination": true,
      "volume_size": 8,
      "volume_type": "gp2"
    }
  }],
  "provisioners": [{
    "type": "ansible",
    "playbook_file": "./playbook/playbook.yml",
    "groups": "alpine",
    "extra_arguments": "-vv"
  }]
}
